(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{8535:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/viewdataset",function(){return n(3932)}])},5930:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var a=n(5893),s=n(1555),i=n(4184),r=n.n(i),o=n(7294),l=n(6792),d=n(6611),c=n(9602);let u=o.forwardRef(({bsPrefix:e,className:t,variant:n,as:s="img",...i},o)=>{let d=(0,l.vE)(e,"card-img");return(0,a.jsx)(s,{ref:o,className:r()(n?`${d}-${n}`:d,t),...i})});u.displayName="CardImg";var p=n(9059);let m=o.forwardRef(({bsPrefix:e,className:t,as:n="div",...s},i)=>{let d=(0,l.vE)(e,"card-header"),c=(0,o.useMemo)(()=>({cardHeaderBsPrefix:d}),[d]);return(0,a.jsx)(p.Z.Provider,{value:c,children:(0,a.jsx)(n,{ref:i,...s,className:r()(t,d)})})});m.displayName="CardHeader";let y=(0,c.Z)("h5"),b=(0,c.Z)("h6"),v=(0,d.Z)("card-body"),f=(0,d.Z)("card-title",{Component:y}),h=(0,d.Z)("card-subtitle",{Component:b}),x=(0,d.Z)("card-link",{Component:"a"}),T=(0,d.Z)("card-text",{Component:"p"}),w=(0,d.Z)("card-footer"),Z=(0,d.Z)("card-img-overlay"),j=o.forwardRef(({bsPrefix:e,className:t,bg:n,text:s,border:i,body:o,children:d,as:c="div",...u},p)=>{let m=(0,l.vE)(e,"card");return(0,a.jsx)(c,{ref:p,...u,className:r()(t,m,n&&`bg-${n}`,s&&`text-${s}`,i&&`border-${i}`),children:o?(0,a.jsx)(v,{children:d}):d})});j.displayName="Card",j.defaultProps={body:!1};var N=Object.assign(j,{Img:u,Title:f,Subtitle:h,Body:v,Link:x,Text:T,Header:m,Footer:w,ImgOverlay:Z}),E=n(1664),g=n.n(E);let C=e=>{let{id:t,category:n,name:i,price:r}=e;return(0,a.jsx)(s.Z,{xs:6,sm:6,md:4,lg:3,xl:2,className:"mb-4",children:(0,a.jsx)(g(),{href:"/viewdataset?id=".concat(t),children:(0,a.jsxs)(N,{children:[(0,a.jsx)(N.Header,{className:"pt-3",children:(0,a.jsx)("div",{className:"".concat(n.toLowerCase(),"Container pt-4")})}),(0,a.jsxs)(N.Footer,{className:"pt-4 pb-2 ps-4 ".concat(n.toLowerCase(),"Color"),children:[(0,a.jsx)("div",{className:"nameContainer",children:(0,a.jsx)("p",{className:"lead",children:i})}),(0,a.jsx)("p",{className:"smalltext",children:n})]})]})})})};var S=C},7468:function(e,t,n){"use strict";var a=n(5893),s=n(8893);let i=e=>{let{customMessage:t}=e;return(0,a.jsxs)("div",{className:"box text-center",children:[(0,a.jsx)("p",{className:"branding mb-4",children:t||s.Z.ErrorMessage}),(0,a.jsx)("i",{className:"fa-solid fa-circle-exclamation fa-4x"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("button",{onClick:()=>window.history.back(),className:"btn mt-2 btnbox",children:[(0,a.jsx)("i",{className:"fa-solid fa-circle-arrow-left"}),"Go Back"]})]})};t.Z=i},3700:function(e,t){"use strict";var n,a;(a=n||(n={})).tokenContractAddress="0xF2692150983b28E20075c855Bad60403885412C8",a.vendorContractAddress="0xBeb84d61d6aC0cBd396AAf488996e78928544A74",t.Z=n},5912:function(e,t){"use strict";var n,a;(a=n||(n={})).POST="POST",a.GET="GET",a.PATCH="PATCH",a.PUT="PUT",a.DELETE="DELETE",a.OPTIONS="OPTIONS",t.Z=n},2291:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});let a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]},1627:function(e,t,n){"use strict";var a=n(6154),s=n(8767),i=n(1163),r=n(6501),o=n(8893);t.Z=function(e,t,n,l){let d=(0,i.useRouter)(),c=async()=>{let{data:e}=await (0,a.Z)({method:n,url:t,data:l});return e},{error:u,data:p,isLoading:m}=(0,s.useQuery)([e,l],()=>c(),{enabled:!0,refetchOnWindowFocus:!1,retry:3,retryDelay:2500,onError(t){t.response&&401===t.response.status&&(localStorage.removeItem("accessToken"),d.push("/")),r.Am.error("".concat(o.Z.ToastError," fetching ").concat(e))}});return{error:u,data:p,isLoading:m}}},3932:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n(5893),s=n(7294),i=n(682),r=n(4051),o=n(7918),l=n.n(o),d=n(9548),c=n(7891),u=n(6154),p=n(1163),m=n(9063),y=n(6501),b=n(8893);let v=e=>{let{datasetId:t,hasClickedSubscribed:n}=e,[a,i]=(0,s.useState)({isSubscribed:!1,subscriptionId:"",isLoaded:!1}),r=(0,p.useRouter)();return(0,s.useEffect)(()=>{(async()=>{try{let e=await u.Z.post("".concat(m.Z.checkSubscriptionEndpoint),{datasetId:t});i({isSubscribed:e.data.isSubscribed,subscriptionId:e.data.subscriptionId,isLoaded:!0})}catch(e){e.response&&401===e.response.status&&(localStorage.removeItem("accessToken"),r.push("/")),i({...a,isLoaded:!0}),y.Am.error(b.Z.ToastError)}})()},[t,n]),a};var f=n(2291),h=n(3700),x=n(5930),T=n(1627),w=n(5912),Z=n(7468);let j=new(l())(l().givenProvider),N=()=>{var e,t,n,o,l,N,E;let[g,C]=(0,s.useState)(!1),S=(0,p.useRouter)(),{id:k}=S.query,P=(0,T.Z)("view dataset",m.Z.datasetViewEndpoint,w.Z.POST,{datasetId:k}),A=(0,T.Z)("similar datasets",m.Z.findsimilarDatasets,w.Z.POST,{datasetId:k}),_=v({datasetId:k,hasClickedSubscribed:g}),[M,O]=(0,s.useState)(""),L=async()=>{if(0===P.data.price)try{await u.Z.post("".concat(m.Z.subscribeEndpoint),{datasetId:k}),C(!0)}catch(e){y.Am.error(b.Z.ToastError)}else try{if(void 0!==window.ethereum)try{let e=await window.ethereum.request({method:"eth_requestAccounts"});O(e[0]);let t=new j.eth.Contract(f.r,h.Z.tokenContractAddress);await t.methods.transfer(h.Z.tokenContractAddress,j.utils.toWei(P.data.price.toString(),"ether")).send({from:M}),await u.Z.post("".concat(m.Z.subscribeEndpoint),{datasetId:k}),C(!0)}catch(e){y.Am.error("Unable to connect to metamask")}else y.Am.error("Please install metamask")}catch(e){y.Am.error("Please install metamask")}},I=null==A?void 0:null===(e=A.data)||void 0===e?void 0:null===(t=e.similarDatasets)||void 0===t?void 0:t.map(e=>(0,a.jsx)(x.Z,{id:e._id,category:e.category,name:null==e?void 0:e.name,price:null==e?void 0:e.price},e._id));return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsxs)(c.Z,{condition:!(null==P?void 0:P.isLoading)&&!(null==A?void 0:A.isLoading),children:[(0,a.jsx)(c.Z,{condition:!P.error,children:(0,a.jsxs)(i.Z,{className:"mt-4",children:[(0,a.jsxs)("div",{className:"jumbotron",children:[(0,a.jsx)("p",{className:"display-6 text-capitalize",children:null==P?void 0:null===(n=P.data)||void 0===n?void 0:n.name}),(0,a.jsx)("p",{className:"smalltext",children:null==P?void 0:null===(o=P.data)||void 0===o?void 0:o.description}),(0,a.jsxs)("div",{className:"chip-grid",children:[(0,a.jsx)("button",{className:"btn chip",children:null==P?void 0:null===(l=P.data)||void 0===l?void 0:l.category}),(0,a.jsx)("button",{className:"btn chip",children:(null==P?void 0:null===(N=P.data)||void 0===N?void 0:N.price)===0?"FREE":"".concat(null==P?void 0:null===(E=P.data)||void 0===E?void 0:E.price," ELT")})]}),(0,a.jsx)(c.Z,{condition:!_.isSubscribed,children:(0,a.jsxs)("button",{className:"btn chip",onClick:L,children:["Subscribe",(0,a.jsx)("i",{className:"fa-solid fa-circle-plus"})]})}),(0,a.jsx)(c.Z,{condition:!_.isSubscribed,children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(m.Z.datasetPreview,"/").concat(k),className:"btn chip",children:"Data Preview"})}),(0,a.jsx)(c.Z,{condition:_.isSubscribed,children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(m.Z.datasetFullview,"/").concat(k,"/").concat(_.subscriptionId),className:"btn chip",children:"Data Fullview"})})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)("p",{className:"lead text-center text-white mb-4",children:"Similar Datasets"}),I]})]})}),(0,a.jsx)(c.Z,{condition:P.error,children:(0,a.jsx)(Z.Z,{})})]}),(0,a.jsx)(c.Z,{condition:(null==P?void 0:P.isLoading)||(null==A?void 0:A.isLoading),children:(0,a.jsx)(d.Z,{})})]})};var E=N},4051:function(e,t,n){"use strict";var a=n(4184),s=n.n(a),i=n(7294),r=n(6792),o=n(5893);let l=i.forwardRef(({bsPrefix:e,className:t,as:n="div",...a},i)=>{let l=(0,r.vE)(e,"row"),d=(0,r.pi)(),c=(0,r.zG)(),u=`${l}-cols`,p=[];return d.forEach(e=>{let t;let n=a[e];delete a[e],null!=n&&"object"==typeof n?{cols:t}=n:t=n;let s=e!==c?`-${e}`:"";null!=t&&p.push(`${u}${s}-${t}`)}),(0,o.jsx)(n,{ref:i,...a,className:s()(t,l,...p)})});l.displayName="Row",t.Z=l}},function(e){e.O(0,[543,774,888,179],function(){return e(e.s=8535)}),_N_E=e.O()}]);