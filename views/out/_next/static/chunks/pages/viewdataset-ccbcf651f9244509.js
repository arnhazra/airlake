(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{8535:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/viewdataset",function(){return n(3806)}])},5930:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var a=n(5893),i=n(1555),s=n(4184),r=n.n(s),l=n(7294),o=n(6792),d=n(6611),c=n(9602);let u=l.forwardRef(({bsPrefix:e,className:t,variant:n,as:i="img",...s},l)=>{let d=(0,o.vE)(e,"card-img");return(0,a.jsx)(i,{ref:l,className:r()(n?`${d}-${n}`:d,t),...s})});u.displayName="CardImg";var p=n(9059);let m=l.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},s)=>{let d=(0,o.vE)(e,"card-header"),c=(0,l.useMemo)(()=>({cardHeaderBsPrefix:d}),[d]);return(0,a.jsx)(p.Z.Provider,{value:c,children:(0,a.jsx)(n,{ref:s,...i,className:r()(t,d)})})});m.displayName="CardHeader";let y=(0,c.Z)("h5"),v=(0,c.Z)("h6"),b=(0,d.Z)("card-body"),f=(0,d.Z)("card-title",{Component:y}),h=(0,d.Z)("card-subtitle",{Component:v}),x=(0,d.Z)("card-link",{Component:"a"}),T=(0,d.Z)("card-text",{Component:"p"}),w=(0,d.Z)("card-footer"),Z=(0,d.Z)("card-img-overlay"),j=l.forwardRef(({bsPrefix:e,className:t,bg:n,text:i,border:s,body:l,children:d,as:c="div",...u},p)=>{let m=(0,o.vE)(e,"card");return(0,a.jsx)(c,{ref:p,...u,className:r()(t,m,n&&`bg-${n}`,i&&`text-${i}`,s&&`border-${s}`),children:l?(0,a.jsx)(b,{children:d}):d})});j.displayName="Card",j.defaultProps={body:!1};var N=Object.assign(j,{Img:u,Title:f,Subtitle:h,Body:b,Link:x,Text:T,Header:m,Footer:w,ImgOverlay:Z}),g=n(1664),E=n.n(g);let C=e=>{let{id:t,category:n,name:s,price:r}=e;return(0,a.jsx)(i.Z,{xs:6,sm:6,md:4,lg:3,xl:2,className:"mb-4",children:(0,a.jsx)(E(),{href:"/viewdataset?id=".concat(t),children:(0,a.jsxs)(N,{children:[(0,a.jsx)(N.Header,{className:"pt-3",children:(0,a.jsx)("div",{className:"".concat(n.toLowerCase(),"Container pt-4")})}),(0,a.jsxs)(N.Footer,{className:"pt-4 pb-2 ps-4 ".concat(n.toLowerCase(),"Color"),children:[(0,a.jsx)("div",{className:"nameContainer",children:(0,a.jsx)("p",{className:"lead",children:s})}),(0,a.jsx)("p",{className:"smalltext",children:n})]})]})})})};var P=C},7468:function(e,t,n){"use strict";var a=n(5893),i=n(8893);let s=e=>{let{customMessage:t}=e;return(0,a.jsxs)("div",{className:"box text-center",children:[(0,a.jsx)("p",{className:"branding mb-4",children:t||i.Z.ErrorMessage}),(0,a.jsx)("i",{className:"fa-solid fa-circle-exclamation fa-4x"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("button",{onClick:()=>window.history.back(),className:"btn mt-2 btnbox",children:[(0,a.jsx)("i",{className:"fa-solid fa-circle-arrow-left"}),"Go Back"]})]})};t.Z=s},3700:function(e,t){"use strict";var n,a;(a=n||(n={})).tokenContractAddress="0xF2692150983b28E20075c855Bad60403885412C8",a.vendorContractAddress="0xBeb84d61d6aC0cBd396AAf488996e78928544A74",t.Z=n},5912:function(e,t){"use strict";var n,a;(a=n||(n={})).POST="POST",a.GET="GET",a.PATCH="PATCH",a.PUT="PUT",a.DELETE="DELETE",a.OPTIONS="OPTIONS",t.Z=n},2291:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});let a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]},1627:function(e,t,n){"use strict";var a=n(6154),i=n(8767),s=n(1163),r=n(6501),l=n(8893);t.Z=function(e,t,n,o,d){let c=(0,s.useRouter)(),u=async()=>{let{data:e}=await (0,a.Z)({method:n,url:t,data:o});return e},{error:p,data:m,isLoading:y}=(0,i.useQuery)([e,o,d],()=>u(),{enabled:!0,refetchOnWindowFocus:!1,retry:3,retryDelay:2500,onError(t){t.response&&401===t.response.status&&(localStorage.removeItem("accessToken"),c.push("/")),r.Am.error("".concat(l.Z.ToastError," fetching ").concat(e))}});return{error:p,data:m,isLoading:y}}},3806:function(e,t,n){"use strict";n.r(t);var a=n(5893),i=n(7294),s=n(682),r=n(4051),l=n(7918),o=n.n(l),d=n(9548),c=n(7891),u=n(6154),p=n(2291),m=n(3700),y=n(9063),v=n(6501),b=n(5930),f=n(1163),h=n(8893),x=n(1627),T=n(5912),w=n(7468);let Z=new(o())(o().givenProvider),j=()=>{var e,t,n,l,o,j,N,g,E,C;let P=(0,f.useRouter)(),{id:S}=P.query,[k,A]=(0,i.useState)(Math.random().toString()),M=(0,x.Z)("view dataset",y.Z.datasetViewEndpoint,T.Z.POST,{datasetId:S}),_=(0,x.Z)("similar datasets",y.Z.findsimilarDatasets,T.Z.POST,{datasetId:S}),O=(0,x.Z)("subscription status",y.Z.checkSubscriptionEndpoint,T.Z.POST,{datasetId:S},k),[L,$]=(0,i.useState)(""),F=async()=>{if(0===M.data.price)try{await u.Z.post("".concat(y.Z.subscribeEndpoint),{datasetId:S}),A(Math.random().toString())}catch(e){v.Am.error(h.Z.ToastError)}else try{if(void 0!==window.ethereum)try{let e=await window.ethereum.request({method:"eth_requestAccounts"});$(e[0]);let t=new Z.eth.Contract(p.r,m.Z.tokenContractAddress);await t.methods.transfer(m.Z.tokenContractAddress,Z.utils.toWei(M.data.price.toString(),"ether")).send({from:L}),await u.Z.post("".concat(y.Z.subscribeEndpoint),{datasetId:S}),A(Math.random().toString())}catch(e){v.Am.error("Unable to connect to metamask")}else v.Am.error("Please install metamask")}catch(e){v.Am.error("Please install metamask")}},D=null==_?void 0:null===(e=_.data)||void 0===e?void 0:null===(t=e.similarDatasets)||void 0===t?void 0:t.map(e=>(0,a.jsx)(b.Z,{id:e._id,category:e.category,name:null==e?void 0:e.name,price:null==e?void 0:e.price},e._id));return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsxs)(c.Z,{condition:!(null==O?void 0:O.isLoading)&&!(null==M?void 0:M.isLoading)&&!(null==_?void 0:_.isLoading),children:[(0,a.jsx)(c.Z,{condition:!M.error,children:(0,a.jsxs)(s.Z,{className:"mt-4",children:[(0,a.jsxs)("div",{className:"jumbotron",children:[(0,a.jsx)("p",{className:"display-6 text-capitalize",children:null==M?void 0:null===(n=M.data)||void 0===n?void 0:n.name}),(0,a.jsx)("p",{className:"smalltext",children:null==M?void 0:null===(l=M.data)||void 0===l?void 0:l.description}),(0,a.jsxs)("div",{className:"chip-grid",children:[(0,a.jsx)("button",{className:"btn chip",children:null==M?void 0:null===(o=M.data)||void 0===o?void 0:o.category}),(0,a.jsx)("button",{className:"btn chip",children:(null==M?void 0:null===(j=M.data)||void 0===j?void 0:j.price)===0?"FREE":"".concat(null==M?void 0:null===(N=M.data)||void 0===N?void 0:N.price," ELT")})]}),(0,a.jsxs)(c.Z,{condition:!(null==O?void 0:null===(g=O.data)||void 0===g?void 0:g.isSubscribed),children:[(0,a.jsxs)("button",{className:"btn chip",onClick:F,children:["Subscribe",(0,a.jsx)("i",{className:"fa-solid fa-circle-plus"})]}),(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(y.Z.datasetPreview,"/").concat(S),className:"btn chip",children:"Data Preview"})]}),(0,a.jsx)(c.Z,{condition:null==O?void 0:null===(E=O.data)||void 0===E?void 0:E.isSubscribed,children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(y.Z.datasetFullview,"/").concat(S,"/").concat(null==O?void 0:null===(C=O.data)||void 0===C?void 0:C.subscriptionId),className:"btn chip",children:"Data Fullview"})})]}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)("p",{className:"lead text-center text-white mb-4",children:"Similar Datasets"}),D]})]})}),(0,a.jsx)(c.Z,{condition:M.error,children:(0,a.jsx)(w.Z,{})})]}),(0,a.jsx)(c.Z,{condition:(null==O?void 0:O.isLoading)||(null==M?void 0:M.isLoading)||(null==_?void 0:_.isLoading),children:(0,a.jsx)(d.Z,{})})]})};t.default=j},4051:function(e,t,n){"use strict";var a=n(4184),i=n.n(a),s=n(7294),r=n(6792),l=n(5893);let o=s.forwardRef(({bsPrefix:e,className:t,as:n="div",...a},s)=>{let o=(0,r.vE)(e,"row"),d=(0,r.pi)(),c=(0,r.zG)(),u=`${o}-cols`,p=[];return d.forEach(e=>{let t;let n=a[e];delete a[e],null!=n&&"object"==typeof n?{cols:t}=n:t=n;let i=e!==c?`-${e}`:"";null!=t&&p.push(`${u}${i}-${t}`)}),(0,l.jsx)(n,{ref:s,...a,className:i()(t,o,...p)})});o.displayName="Row",t.Z=o}},function(e){e.O(0,[543,774,888,179],function(){return e(e.s=8535)}),_N_E=e.O()}]);