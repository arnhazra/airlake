(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{8535:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/viewdataset",function(){return n(5937)}])},8609:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var a=n(5893),s=n(1555),i=n(4184),r=n.n(i),o=n(7294),l=n(6792),d=n(6611),c=n(9602);let u=o.forwardRef(({bsPrefix:e,className:t,variant:n,as:s="img",...i},o)=>{let d=(0,l.vE)(e,"card-img");return(0,a.jsx)(s,{ref:o,className:r()(n?`${d}-${n}`:d,t),...i})});u.displayName="CardImg";var p=n(9059);let m=o.forwardRef(({bsPrefix:e,className:t,as:n="div",...s},i)=>{let d=(0,l.vE)(e,"card-header"),c=(0,o.useMemo)(()=>({cardHeaderBsPrefix:d}),[d]);return(0,a.jsx)(p.Z.Provider,{value:c,children:(0,a.jsx)(n,{ref:i,...s,className:r()(t,d)})})});m.displayName="CardHeader";let y=(0,c.Z)("h5"),v=(0,c.Z)("h6"),f=(0,d.Z)("card-body"),x=(0,d.Z)("card-title",{Component:y}),b=(0,d.Z)("card-subtitle",{Component:v}),h=(0,d.Z)("card-link",{Component:"a"}),j=(0,d.Z)("card-text",{Component:"p"}),T=(0,d.Z)("card-footer"),N=(0,d.Z)("card-img-overlay"),w=o.forwardRef(({bsPrefix:e,className:t,bg:n,text:s,border:i,body:o,children:d,as:c="div",...u},p)=>{let m=(0,l.vE)(e,"card");return(0,a.jsx)(c,{ref:p,...u,className:r()(t,m,n&&`bg-${n}`,s&&`text-${s}`,i&&`border-${i}`),children:o?(0,a.jsx)(f,{children:d}):d})});w.displayName="Card",w.defaultProps={body:!1};var Z=Object.assign(w,{Img:u,Title:x,Subtitle:b,Body:f,Link:h,Text:j,Header:m,Footer:T,ImgOverlay:N}),C=n(1664),E=n.n(C);let g=e=>{let{id:t,category:n,name:i,price:r}=e;return(0,a.jsx)(s.Z,{xs:6,sm:6,md:4,lg:3,xl:2,className:"mb-4",children:(0,a.jsx)(E(),{href:"/viewdataset?id=".concat(t),children:(0,a.jsxs)(Z,{children:[(0,a.jsx)(Z.Header,{className:"pt-3",children:(0,a.jsx)("div",{className:"".concat(n.toLowerCase(),"Container pt-4")})}),(0,a.jsxs)(Z.Footer,{className:"pt-4 pb-2 ps-4 ".concat(n.toLowerCase(),"Color"),children:[(0,a.jsx)("div",{className:"nameContainer",children:(0,a.jsx)("p",{className:"lead",children:i})}),(0,a.jsx)("p",{className:"smalltext",children:n})]})]})})})};var A=g},3298:function(e,t,n){"use strict";var a=n(5893),s=n(8893);let i=e=>{let{customMessage:t}=e;return(0,a.jsxs)("div",{className:"box",children:[(0,a.jsx)("p",{className:"branding mb-4",children:t||s.Z.ErrorMessage}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("i",{className:"fa-solid fa-circle-exclamation fa-4x "}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]}),(0,a.jsxs)("button",{onClick:()=>window.history.back(),className:"btn mt-2",children:[(0,a.jsx)("i",{className:"fa-solid fa-circle-arrow-left"}),"Go Back"]})]})};t.Z=i},3700:function(e,t){"use strict";var n,a;(a=n||(n={})).tokenContractAddress="0xE7f2cF68e353cB1Fa43846f3F395475267fbFbf0",a.vendorContractAddress="0x09203B8d2132a05a2CC3bE3068d8A8198D89788e",t.Z=n},5912:function(e,t){"use strict";var n,a;(a=n||(n={})).POST="POST",a.GET="GET",a.PATCH="PATCH",a.PUT="PUT",a.DELETE="DELETE",a.OPTIONS="OPTIONS",t.Z=n},2291:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});let a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]},1627:function(e,t,n){"use strict";var a=n(6154),s=n(8767),i=n(1163),r=n(6501),o=n(8893);t.Z=function(e,t,n,l,d){let c=(0,i.useRouter)(),u=async()=>{let{data:e}=await (0,a.Z)({method:n,url:t,data:l});return e},{error:p,data:m,isLoading:y}=(0,s.useQuery)([e,l,d],()=>u(),{enabled:!0,refetchOnWindowFocus:!1,retry:3,retryDelay:2500,onError(t){t.response&&401===t.response.status&&(localStorage.removeItem("accessToken"),c.push("/")),r.Am.error("".concat(o.Z.ToastError," fetching ").concat(e))}});return{error:p,data:m,isLoading:y}}},5937:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a=n(5893),s=n(7294),i=n(682),r=n(4051),o=n(7918),l=n.n(o),d=n(3056),c=n(1120),u=n(6154),p=n(2291),m=n(3700),y=n(9063),v=n(6501),f=n(8609),x=n(1163),b=n(8893),h=n(1627),j=n(5912),T=n(3298),N=n(4184),w=n.n(N),Z=n(7150),C=n(6792),E=n(6518);function g(e,t){return Array.isArray(e)?e.includes(t):e===t}let A=s.createContext({});A.displayName="AccordionContext";let P=s.forwardRef(({as:e="div",bsPrefix:t,className:n,children:i,eventKey:r,...o},l)=>{let{activeEventKey:d}=(0,s.useContext)(A);return t=(0,C.vE)(t,"accordion-collapse"),(0,a.jsx)(E.Z,{ref:l,in:g(d,r),...o,className:w()(n,t),children:(0,a.jsx)(e,{children:s.Children.only(i)})})});P.displayName="AccordionCollapse";let S=s.createContext({eventKey:""});S.displayName="AccordionItemContext";let k=s.forwardRef(({as:e="div",bsPrefix:t,className:n,onEnter:i,onEntering:r,onEntered:o,onExit:l,onExiting:d,onExited:c,...u},p)=>{t=(0,C.vE)(t,"accordion-body");let{eventKey:m}=(0,s.useContext)(S);return(0,a.jsx)(P,{eventKey:m,onEnter:i,onEntering:r,onEntered:o,onExit:l,onExiting:d,onExited:c,children:(0,a.jsx)(e,{ref:p,...u,className:w()(n,t)})})});k.displayName="AccordionBody";let M=s.forwardRef(({as:e="button",bsPrefix:t,className:n,onClick:i,...r},o)=>{t=(0,C.vE)(t,"accordion-button");let{eventKey:l}=(0,s.useContext)(S),d=function(e,t){let{activeEventKey:n,onSelect:a,alwaysOpen:i}=(0,s.useContext)(A);return s=>{let r=e===n?null:e;i&&(r=Array.isArray(n)?n.includes(e)?n.filter(t=>t!==e):[...n,e]:[e]),null==a||a(r,s),null==t||t(s)}}(l,i),{activeEventKey:c}=(0,s.useContext)(A);return"button"===e&&(r.type="button"),(0,a.jsx)(e,{ref:o,onClick:d,...r,"aria-expanded":Array.isArray(c)?c.includes(l):l===c,className:w()(n,t,!g(c,l)&&"collapsed")})});M.displayName="AccordionButton";let O=s.forwardRef(({as:e="h2",bsPrefix:t,className:n,children:s,onClick:i,...r},o)=>(t=(0,C.vE)(t,"accordion-header"),(0,a.jsx)(e,{ref:o,...r,className:w()(n,t),children:(0,a.jsx)(M,{onClick:i,children:s})})));O.displayName="AccordionHeader";let _=s.forwardRef(({as:e="div",bsPrefix:t,className:n,eventKey:i,...r},o)=>{t=(0,C.vE)(t,"accordion-item");let l=(0,s.useMemo)(()=>({eventKey:i}),[i]);return(0,a.jsx)(S.Provider,{value:l,children:(0,a.jsx)(e,{ref:o,...r,className:w()(n,t)})})});_.displayName="AccordionItem";let R=s.forwardRef((e,t)=>{let{as:n="div",activeKey:i,bsPrefix:r,className:o,onSelect:l,flush:d,alwaysOpen:c,...u}=(0,Z.Ch)(e,{activeKey:"onSelect"}),p=(0,C.vE)(r,"accordion"),m=(0,s.useMemo)(()=>({activeEventKey:i,onSelect:l,alwaysOpen:c}),[i,l,c]);return(0,a.jsx)(A.Provider,{value:m,children:(0,a.jsx)(n,{ref:t,...u,className:w()(o,p,d&&`${p}-flush`)})})});R.displayName="Accordion";var I=Object.assign(R,{Button:M,Collapse:P,Item:_,Header:O,Body:k});let L=e=>{let{header:t,body:n,eventKey:s}=e;return(0,a.jsx)(I,{defaultActiveKey:"0",children:(0,a.jsxs)(I.Item,{eventKey:s,children:[(0,a.jsx)(I.Header,{children:t}),(0,a.jsx)(I.Body,{children:n})]})})},$=new(l())(l().givenProvider),B=()=>{var e,t,n,o,l,N,w,Z,C,E,g;let A=(0,x.useRouter)(),{id:P}=A.query,[S,k]=(0,s.useState)(Math.random().toString()),[M,O]=(0,s.useState)(""),_=(0,h.Z)("view dataset",y.Z.datasetViewEndpoint,j.Z.POST,{datasetId:P}),R=(0,h.Z)("similar datasets",y.Z.findsimilarDatasets,j.Z.POST,{datasetId:P}),I=(0,h.Z)("subscription status",y.Z.checkSubscriptionEndpoint,j.Z.POST,{datasetId:P},S),B=async()=>{if(0===_.data.price)try{await u.Z.post("".concat(y.Z.subscribeEndpoint),{datasetId:P}),k(Math.random().toString())}catch(e){v.Am.error(b.Z.ToastError)}else try{if(void 0!==window.ethereum)try{let e=await window.ethereum.request({method:"eth_requestAccounts"});O(e[0]);let t=new $.eth.Contract(p.r,m.Z.tokenContractAddress);await t.methods.transfer(m.Z.tokenContractAddress,$.utils.toWei(_.data.price.toString(),"ether")).send({from:M}),await u.Z.post("".concat(y.Z.subscribeEndpoint),{datasetId:P}),k(Math.random().toString())}catch(e){v.Am.error("Unable to connect to metamask")}else v.Am.error("Please install metamask")}catch(e){v.Am.error("Please install metamask")}},D=null==R?void 0:null===(e=R.data)||void 0===e?void 0:null===(t=e.similarDatasets)||void 0===t?void 0:t.map(e=>(0,a.jsx)(f.Z,{id:e._id,category:e.category,name:null==e?void 0:e.name,price:null==e?void 0:e.price},e._id)),F=()=>{navigator.clipboard.writeText("".concat(y.Z.metadataapi,"/").concat(P)),v.Am.success("Copied to Clipboard")},H=()=>{var e;navigator.clipboard.writeText("".concat(y.Z.dataapi,"/").concat(P,"/").concat(null==I?void 0:null===(e=I.data)||void 0===e?void 0:e.subscriptionId)),v.Am.success("Copied to Clipboard")},K=null==_?void 0:null===(n=_.data)||void 0===n?void 0:null===(o=n.description)||void 0===o?void 0:o.split(" ").map(e=>{if(e.length>4)return(0,a.jsx)("button",{className:"btn tag-chip",children:e})});return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsxs)(c.Z,{condition:!(null==I?void 0:I.isLoading)&&!(null==_?void 0:_.isLoading)&&!(null==R?void 0:R.isLoading),children:[(0,a.jsx)(c.Z,{condition:!_.error,children:(0,a.jsxs)(i.Z,{className:"mt-4",children:[(0,a.jsxs)("div",{className:"jumbotron",children:[(0,a.jsx)("p",{className:"display-6 text-capitalize",children:null==_?void 0:null===(l=_.data)||void 0===l?void 0:l.name}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{className:"btn",children:[null==_?void 0:null===(N=_.data)||void 0===N?void 0:N.category," ",(0,a.jsx)("i",{className:"fa-solid fa-layer-group"})]}),(0,a.jsxs)("button",{className:"btn",children:[(null==_?void 0:null===(w=_.data)||void 0===w?void 0:w.price)===0?"FREE":"".concat(null==_?void 0:null===(Z=_.data)||void 0===Z?void 0:Z.price," LST")," ",(0,a.jsx)("i",{className:"fa-brands fa-connectdevelop"})]})]}),(0,a.jsxs)(c.Z,{condition:!(null==I?void 0:null===(C=I.data)||void 0===C?void 0:C.isSubscribed),children:[(0,a.jsxs)("button",{className:"btn",onClick:B,children:["Subscribe",(0,a.jsx)("i",{className:"fa-solid fa-circle-plus"})]}),(0,a.jsxs)("button",{className:"btn",onClick:F,children:["Metadata API ",(0,a.jsx)("i",{className:"fa-solid fa-copy"})]})]}),(0,a.jsx)(c.Z,{condition:null==I?void 0:null===(E=I.data)||void 0===E?void 0:E.isSubscribed,children:(0,a.jsxs)("button",{className:"btn",onClick:H,children:["Data API ",(0,a.jsx)("i",{className:"fa-solid fa-copy"})]})})]}),(0,a.jsx)(L,{eventKey:"0",header:"About Dataset",body:null==_?void 0:null===(g=_.data)||void 0===g?void 0:g.description}),(0,a.jsx)(L,{eventKey:"1",header:"Similar Datasets",body:(0,a.jsx)(r.Z,{children:D})}),(0,a.jsx)(L,{eventKey:"2",header:"Dataset Tags",body:K})]})}),(0,a.jsx)(c.Z,{condition:_.error,children:(0,a.jsx)(T.Z,{})})]}),(0,a.jsx)(c.Z,{condition:(null==I?void 0:I.isLoading)||(null==_?void 0:_.isLoading)||(null==R?void 0:R.isLoading),children:(0,a.jsx)(d.Z,{})})]})};var D=B},4051:function(e,t,n){"use strict";var a=n(4184),s=n.n(a),i=n(7294),r=n(6792),o=n(5893);let l=i.forwardRef(({bsPrefix:e,className:t,as:n="div",...a},i)=>{let l=(0,r.vE)(e,"row"),d=(0,r.pi)(),c=(0,r.zG)(),u=`${l}-cols`,p=[];return d.forEach(e=>{let t;let n=a[e];delete a[e],null!=n&&"object"==typeof n?{cols:t}=n:t=n;let s=e!==c?`-${e}`:"";null!=t&&p.push(`${u}${s}-${t}`)}),(0,o.jsx)(n,{ref:i,...a,className:s()(t,l,...p)})});l.displayName="Row",t.Z=l}},function(e){e.O(0,[543,774,888,179],function(){return e(e.s=8535)}),_N_E=e.O()}]);