(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{2304:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return a(5235)}])},5235:function(e,t,a){"use strict";a.r(t);var s=a(5893),n=a(7294),o=a(6154),r=a(4119),i=a(1358),l=a(8893),c=a(7891),u=a(9063),d=a(1163);let h=()=>{let[e,t]=(0,n.useState)({firststep:!0,secondstep:!1}),[a,h]=(0,n.useState)({name:"",email:"",hash:"",otp:"",newuser:!1}),[m,p]=(0,n.useState)(""),[f,x]=(0,n.useState)(!1),g=(0,d.useRouter)(),b=async e=>{e.preventDefault(),p(l.Z.AuthMessage),x(!0);try{let e=await o.Z.post(u.Z.generateAuthCodeEndpoint,a);h({...a,hash:e.data.hash,newuser:e.data.newuser}),p(e.data.msg),t({firststep:!1,secondstep:!0}),x(!1)}catch(e){p(l.Z.ConnectionErrorMessage),x(!1)}},j=async e=>{e.preventDefault(),p(l.Z.AuthMessage),x(!0);try{let e=await o.Z.post(u.Z.verifyAuthCodeEndpoint,a);localStorage.setItem("accessToken",e.data.accessToken),p("Successfully authenticated"),x(!1),g.push("/dataplatform")}catch(e){e.response?(p(e.response.data.msg),x(!1)):(p(l.Z.ConnectionErrorMessage),x(!1))}};return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(c.Z,{condition:e.firststep,children:(0,s.jsxs)("form",{className:"box",onSubmit:b,children:[(0,s.jsx)("p",{className:"branding",children:"Evolake Auth"}),(0,s.jsx)("p",{className:"boxtext",children:"Enter the email address where you can be contacted. This email address will be used for authentication."}),(0,s.jsx)(r.Z,{controlId:"floatingEmail",label:"Your Email",children:(0,s.jsx)(i.Z.Control,{autoFocus:!0,type:"email",placeholder:"Your Email",onChange:e=>h({...a,email:e.target.value}),required:!0,autoComplete:"off",minLength:4,maxLength:40})}),(0,s.jsx)("p",{id:"alert",children:m}),(0,s.jsxs)("button",{type:"submit",className:"mt-2 btn btnbox",children:["Continue to Evolake ",f?(0,s.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):(0,s.jsx)("i",{className:"fa-solid fa-circle-arrow-right"})]}),(0,s.jsx)("br",{})]})}),(0,s.jsx)(c.Z,{condition:e.secondstep,children:(0,s.jsxs)("form",{className:"box",onSubmit:j,children:[(0,s.jsx)("p",{className:"branding",children:"Evolake Auth"}),(0,s.jsx)("p",{className:"boxtext",children:"Please verify your identity by entering the auth code we sent to your inbox. Once you've entered the code, you can continue using our services."}),(0,s.jsx)(c.Z,{condition:a.newuser,children:(0,s.jsx)(r.Z,{controlId:"floatingName",label:"Your Name",children:(0,s.jsx)(i.Z.Control,{type:"text",placeholder:"Your Name",onChange:e=>h({...a,name:e.target.value}),required:!0,autoComplete:"off",minLength:3,maxLength:40})})}),(0,s.jsx)(r.Z,{controlId:"floatingPassword",label:"Enter Auth Code",children:(0,s.jsx)(i.Z.Control,{type:"password",name:"otp",placeholder:"Enter Auth Code",onChange:e=>h({...a,otp:e.target.value}),required:!0,autoComplete:"off",minLength:6,maxLength:6})}),(0,s.jsx)("p",{id:"alert",children:m}),(0,s.jsxs)("button",{type:"submit",className:"mt-2 btn btnbox",children:[a.newuser?"Set up the account":"Continue to the app"," ",f?(0,s.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):(0,s.jsx)("i",{className:"fa-solid fa-circle-arrow-right"})]})]})})]})};t.default=h}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2304)}),_N_E=e.O()}]);