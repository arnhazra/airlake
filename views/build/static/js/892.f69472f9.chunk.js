"use strict";(self.webpackChunkview=self.webpackChunkview||[]).push([[892],{4892:function(e,t,n){n.r(t);var a=n(4165),s=n(1413),r=n(5861),o=n(9439),c=n(7313),i=n(9610),l=n(8467),u=n(5491),d=n(6753),h=n(617),p=n(5099),m=n(4537),f=n(6417);t.default=function(){var e=(0,c.useState)({firststep:!0,secondstep:!1}),t=(0,o.Z)(e,2),n=t[0],x=t[1],Z=(0,c.useState)({name:"",email:"",hash:"",otp:"",newuser:!1}),g=(0,o.Z)(Z,2),b=g[0],j=g[1],w=(0,c.useState)(""),v=(0,o.Z)(w,2),C=v[0],k=v[1],y=(0,c.useState)(!1),N=(0,o.Z)(y,2),S=N[0],E=N[1],A=(0,l.s0)(),L=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),k(h.Z.AuthMessage),E(!0),e.prev=3,e.next=6,i.Z.post(m.Z.generateAuthCodeEndpoint,b);case 6:n=e.sent,j((0,s.Z)((0,s.Z)({},b),{},{hash:n.data.hash,newuser:n.data.newuser})),k(n.data.msg),x({firststep:!1,secondstep:!0}),E(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),k(h.Z.ConnectionErrorMessage),E(!1);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),k(h.Z.AuthMessage),E(!0),e.prev=3,e.next=6,i.Z.post(m.Z.verifyAuthCodeEndpoint,b);case 6:n=e.sent,i.Z.defaults.headers.common.Authorization="Bearer ".concat(n.data.accessToken),localStorage.setItem("accessToken",n.data.accessToken),k("Successfully authenticated"),E(!1),A("/dataset/library"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),e.t0.response?(k(e.t0.response.data.msg),E(!1)):(k(h.Z.ConnectionErrorMessage),E(!1));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(p.Z,{condition:localStorage.hasOwnProperty("accessToken"),children:(0,f.jsx)(l.Fg,{replace:!0,to:"/dataset/library"})}),(0,f.jsxs)(p.Z,{condition:!localStorage.hasOwnProperty("accessToken"),children:[(0,f.jsx)(p.Z,{condition:n.firststep,children:(0,f.jsxs)("form",{className:"box",onSubmit:L,children:[(0,f.jsx)("p",{className:"branding",children:"Lenstack Auth"}),(0,f.jsx)("p",{className:"boxtext",children:"Enter the email address where you can be contacted. This email address will be used for authentication."}),(0,f.jsx)(u.Z,{controlId:"floatingEmail",label:"Your Email",children:(0,f.jsx)(d.Z.Control,{autoFocus:!0,type:"email",placeholder:"Your Email",onChange:function(e){return j((0,s.Z)((0,s.Z)({},b),{},{email:e.target.value}))},required:!0,autoComplete:"off",minLength:4,maxLength:40})}),(0,f.jsx)("p",{id:"alert",children:C}),(0,f.jsxs)("button",{type:"submit",className:"mt-2 btn btnbox",children:["Continue to Lenstack ",S?(0,f.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):(0,f.jsx)("i",{className:"fa-solid fa-circle-arrow-right"})]}),(0,f.jsx)("br",{})]})}),(0,f.jsx)(p.Z,{condition:n.secondstep,children:(0,f.jsxs)("form",{className:"box",onSubmit:T,children:[(0,f.jsx)("p",{className:"branding",children:"Lenstack Auth"}),(0,f.jsx)("p",{className:"boxtext",children:"Check your email address and enter auth code to continue"}),(0,f.jsx)(p.Z,{condition:b.newuser,children:(0,f.jsx)(u.Z,{controlId:"floatingName",label:"Your Name",children:(0,f.jsx)(d.Z.Control,{type:"text",placeholder:"Your Name",onChange:function(e){return j((0,s.Z)((0,s.Z)({},b),{},{name:e.target.value}))},required:!0,autoComplete:"off",minLength:3,maxLength:40})})}),(0,f.jsx)(u.Z,{controlId:"floatingPassword",label:"Enter Auth Code",children:(0,f.jsx)(d.Z.Control,{type:"password",name:"otp",placeholder:"Enter Auth Code",onChange:function(e){return j((0,s.Z)((0,s.Z)({},b),{},{otp:e.target.value}))},required:!0,autoComplete:"off",minLength:6,maxLength:6})}),(0,f.jsx)("p",{id:"alert",children:C}),(0,f.jsxs)("button",{type:"submit",className:"mt-2 btn btnbox",children:[b.newuser?"Set up the account":"Continue to the app"," ",S?(0,f.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):(0,f.jsx)("i",{className:"fa-solid fa-circle-arrow-right"})]})]})})]})]})}}}]);