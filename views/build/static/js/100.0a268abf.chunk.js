"use strict";(self.webpackChunkview=self.webpackChunkview||[]).push([[100],{3369:function(e,t,a){a.d(t,{Z:function(){return I}});var n=a(1616),s=a(1413),r=a(5987),i=a(6123),c=a.n(i),o=a(7313),d=a(8524),l=a(8864),u=a(6205),p=a(6417),m=["bsPrefix","className","variant","as"],y=o.forwardRef((function(e,t){var a=e.bsPrefix,n=e.className,i=e.variant,o=e.as,l=void 0===o?"img":o,u=(0,r.Z)(e,m),y=(0,d.vE)(a,"card-img");return(0,p.jsx)(l,(0,s.Z)({ref:t,className:c()(i?"".concat(y,"-").concat(i):y,n)},u))}));y.displayName="CardImg";var f=y,b=a(5614),h=["bsPrefix","className","as"],x=o.forwardRef((function(e,t){var a=e.bsPrefix,n=e.className,i=e.as,l=void 0===i?"div":i,u=(0,r.Z)(e,h),m=(0,d.vE)(a,"card-header"),y=(0,o.useMemo)((function(){return{cardHeaderBsPrefix:m}}),[m]);return(0,p.jsx)(b.Z.Provider,{value:y,children:(0,p.jsx)(l,(0,s.Z)((0,s.Z)({ref:t},u),{},{className:c()(n,m)}))})}));x.displayName="CardHeader";var v=x,Z=["bsPrefix","className","bg","text","border","body","children","as"],w=(0,u.Z)("h5"),g=(0,u.Z)("h6"),j=(0,l.Z)("card-body"),T=(0,l.Z)("card-title",{Component:w}),k=(0,l.Z)("card-subtitle",{Component:g}),N=(0,l.Z)("card-link",{Component:"a"}),S=(0,l.Z)("card-text",{Component:"p"}),L=(0,l.Z)("card-footer"),E=(0,l.Z)("card-img-overlay"),C=o.forwardRef((function(e,t){var a=e.bsPrefix,n=e.className,i=e.bg,o=e.text,l=e.border,u=e.body,m=e.children,y=e.as,f=void 0===y?"div":y,b=(0,r.Z)(e,Z),h=(0,d.vE)(a,"card");return(0,p.jsx)(f,(0,s.Z)((0,s.Z)({ref:t},b),{},{className:c()(n,h,i&&"bg-".concat(i),o&&"text-".concat(o),l&&"border-".concat(l)),children:u?(0,p.jsx)(j,{children:m}):m}))}));C.displayName="Card",C.defaultProps={body:!1};var A=Object.assign(C,{Img:f,Title:T,Subtitle:k,Body:j,Link:N,Text:S,Header:v,Footer:L,ImgOverlay:E}),P=a(2135),I=function(e){var t=e.id,a=e.category,s=e.name,r=e.price;return(0,p.jsx)(n.Z,{xs:12,sm:12,md:6,lg:4,xl:3,className:"mb-4",children:(0,p.jsx)(P.rU,{to:"/dataset/viewone/".concat(t),children:(0,p.jsxs)(A,{children:[(0,p.jsx)(A.Header,{className:"pt-3",children:(0,p.jsx)("div",{className:"".concat(a.toLowerCase(),"Container pt-4")})}),(0,p.jsxs)(A.Footer,{className:"pt-4 pb-2 ps-4",children:[(0,p.jsx)("p",{className:"lead",children:s}),(0,p.jsx)("p",{className:"smalltext",children:a}),(0,p.jsx)("button",{className:"chip",children:0===r?"FREE":r+" FLG"}),(0,p.jsx)("br",{})]})]})})})}},3702:function(e,t){var a;!function(e){e.tokenContractAddress="0x9d46e816e10c6353Fcf7381343b053117641d472",e.vendorContractAddress="0xeF98846BF1e7F5f8c380F481701763650021A5d4"}(a||(a={})),t.Z=a},9277:function(e,t,a){a.d(t,{r:function(){return n}});var n=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]},1100:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var n=a(4165),s=a(5861),r=a(9439),i=a(8467),c=a(7313),o=a(2102),d=a(3849),l=a(5372),u=a.n(l),p=a(2375),m=a(8768),y=a(5099),f=a(1413),b=a(9610),h=a(4537),x=function(e){var t=e.id,a=(0,c.useState)({id:"",name:"",description:"",category:"",price:0,dataLength:0,isLoaded:!1,hasError:!1}),o=(0,r.Z)(a,2),d=o[0],l=o[1],u=(0,i.s0)(),p=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var a,s,r,i,c,o,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b.Z.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),e.next=4,b.Z.post("".concat(h.Z.datasetViewEndpoint,"/").concat(t));case 4:a=e.sent,s=a.data.metadata,r=s._id,i=s.name,c=s.description,o=s.category,p=s.price,l((0,f.Z)((0,f.Z)({},d),{},{id:r,name:i,description:c,category:o,price:p,dataLength:a.data.dataLength,isLoaded:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),401===e.t0.response.status?(localStorage.removeItem("accessToken"),u("/")):l((0,f.Z)((0,f.Z)({},d),{},{isLoaded:!0,hasError:!0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){l((0,f.Z)((0,f.Z)({},d),{},{isLoaded:!1})),p()}),[t]),d},v=a(6056),Z=function(e){var t=e.id,a=e.hasClickedSubscribed,o=(0,c.useState)({isSubscribed:!1,subscriptionId:"",isLoaded:!1}),d=(0,r.Z)(o,2),l=d[0],u=d[1],p=(0,i.s0)();return(0,c.useEffect)((function(){(0,s.Z)((0,n.Z)().mark((function e(){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b.Z.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),e.next=4,b.Z.post("".concat(h.Z.checkSubscriptionEndpoint,"/").concat(t));case 4:a=e.sent,u({isSubscribed:a.data.isSubscribed,subscriptionId:a.data.subscriptionId,isLoaded:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),401===e.t0.response.status?(localStorage.removeItem("accessToken"),p("/")):(u((0,f.Z)((0,f.Z)({},l),{},{isLoaded:!0})),v.Am.error("Something went wrong"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[t,a]),l},w=function(e){var t=e.id,a=(0,c.useState)({similarDatasets:[],isLoaded:!1}),o=(0,r.Z)(a,2),d=o[0],l=o[1],u=(0,i.s0)(),p=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b.Z.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),e.next=4,b.Z.post("".concat(h.Z.findsimilarDatasets,"/").concat(t));case 4:a=e.sent,l((0,f.Z)((0,f.Z)({},d),{},{similarDatasets:a.data.similarDatasets,isLoaded:!0})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),401===e.t0.response.status?(localStorage.removeItem("accessToken"),u("/")):(l((0,f.Z)((0,f.Z)({},d),{},{isLoaded:!0})),v.ZP.error("Something went wrong"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){p()}),[]),d},g=a(9277),j=a(3702),T=a(3369),k=a(6417),N=new(u())(u().givenProvider),S=function(){var e=(0,c.useState)(!1),t=(0,r.Z)(e,2),a=t[0],l=t[1],u=(0,i.UO)().datasetId,f=x({id:u}),S=Z({id:u,hasClickedSubscribed:a}),L=w({id:u}),E=(0,c.useState)(""),C=(0,r.Z)(E,2),A=C[0],P=C[1],I=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==f.price){e.next=12;break}return e.prev=1,e.next=4,b.Z.post("".concat(h.Z.subscribeEndpoint,"/").concat(u));case 4:l(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),v.Am.error("Something went wrong");case 10:e.next=38;break;case 12:if(e.prev=12,"undefined"==typeof window||"undefined"==typeof window.ethereum){e.next=32;break}return e.prev=14,e.next=17,window.ethereum.request({method:"eth_requestAccounts"});case 17:return t=e.sent,P(t[0]),a=new N.eth.Contract(g.r,j.Z.tokenContractAddress),e.next=22,a.methods.transfer(j.Z.tokenContractAddress,N.utils.toWei(f.price.toString(),"ether")).send({from:A});case 22:return e.next=24,b.Z.post("".concat(h.Z.subscribeEndpoint,"/").concat(u));case 24:l(!0),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(14),v.Am.error("Unable to connect to metamask");case 30:e.next=33;break;case 32:v.Am.error("Please install metamask");case 33:e.next=38;break;case 35:e.prev=35,e.t2=e.catch(12),v.Am.error("Please install metamask");case 38:case"end":return e.stop()}}),e,null,[[1,7],[12,35],[14,27]])})));return function(){return e.apply(this,arguments)}}(),M=L.similarDatasets.map((function(e){return(0,k.jsx)(T.Z,{id:e._id,category:e.category,name:e.name,price:e.price},e._id)}));return(0,k.jsxs)(c.Fragment,{children:[(0,k.jsxs)(y.Z,{condition:f.isLoaded&&S.isLoaded,children:[(0,k.jsx)(y.Z,{condition:!f.hasError,children:(0,k.jsxs)(o.Z,{className:"mt-4",children:[(0,k.jsxs)("div",{className:"jumbotron",children:[(0,k.jsx)("p",{className:"display-4 text-capitalize",children:f.name}),(0,k.jsx)("p",{className:"smalltext",children:f.description}),(0,k.jsxs)("div",{className:"chip-grid",children:[(0,k.jsx)("button",{className:"chip me-3",children:f.category}),(0,k.jsx)("button",{className:"chip me-3",children:0===f.price?"FREE":"".concat(f.price," LST")}),(0,k.jsxs)("button",{className:"chip",children:[f.dataLength," Datapoints"]}),(0,k.jsx)("br",{})]}),(0,k.jsxs)("button",{disabled:S.isSubscribed,className:"btn",onClick:I,children:[S.isSubscribed?"Subscribed":"Subscribe",S.isSubscribed?(0,k.jsx)("i",{className:"fa-solid fa-circle-check fa-white"}):(0,k.jsx)("i",{className:"fa-solid fa-circle-plus"})]}),!S.isSubscribed&&(0,k.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"localhost"===window.location.hostname?"http://localhost:7000/api/dataset/data/preview/".concat(u):"/api/dataset/data/preview/".concat(u),className:"btn",children:["Preview Data",(0,k.jsx)("i",{className:"fa-solid fa-circle-arrow-right"})]}),S.isSubscribed&&(0,k.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"localhost"===window.location.hostname?"http://localhost:7000/api/dataset/data/view/".concat(u,"/").concat(S.subscriptionId):"/api/dataset/data/view/".concat(u,"/").concat(S.subscriptionId),className:"btn",children:["View Data",(0,k.jsx)("i",{className:"fa-solid fa-circle-arrow-right"})]})]}),(0,k.jsxs)(d.Z,{children:[(0,k.jsx)("p",{className:"lead text-center text-white mb-4",children:"Similar Datasets"}),M]})]})}),(0,k.jsx)(y.Z,{condition:f.hasError,children:(0,k.jsx)(m.Z,{})})]}),(0,k.jsx)(y.Z,{condition:!f.isLoaded||!S.isLoaded,children:(0,k.jsx)(p.Z,{})})]})}},3849:function(e,t,a){var n=a(1413),s=a(5987),r=a(6123),i=a.n(r),c=a(7313),o=a(8524),d=a(6417),l=["bsPrefix","className","as"],u=c.forwardRef((function(e,t){var a=e.bsPrefix,r=e.className,c=e.as,u=void 0===c?"div":c,p=(0,s.Z)(e,l),m=(0,o.vE)(a,"row"),y=(0,o.pi)(),f=(0,o.zG)(),b="".concat(m,"-cols"),h=[];return y.forEach((function(e){var t,a=p[e];delete p[e],t=null!=a&&"object"===typeof a?a.cols:a;var n=e!==f?"-".concat(e):"";null!=t&&h.push("".concat(b).concat(n,"-").concat(t))})),(0,d.jsx)(u,(0,n.Z)((0,n.Z)({ref:t},p),{},{className:i().apply(void 0,[r,m].concat(h))}))}));u.displayName="Row",t.Z=u}}]);